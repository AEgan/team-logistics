<!DOCTYPE html>
<html>
	<head>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script type="text/javascript" src="../../javascripts/application.js"></script>
    <link rel="stylesheet" type="text/css" href="../../stylesheets/application.css">
    <title><%= theEvent.name + " for " + team.name %></title>
	</head>
	<body>
		<% if(current_user) { %>
		<% include loggedInNavigation.ejs %>
		<% } else { %>
		<% include navigation.ejs %>
		<% } %>
		<div id="mainContent">
			<% if(warning) { %>
			<div class="warning">
		      <p><%= warning %></p>
		  </div>
		  <% } %>
		  <% if(success) { %>
		  <div class="success">
		      <p><%= success %></p>
		  </div>
		  <% } %>
			<h1><%= theEvent.name %></h1>
			<p><b><%= theEvent.name + " for " + team.name + " " + team.sport %></b><br/>
				Location: <%= theEvent.street + " " + theEvent.city + " " + theEvent.state + " " + theEvent.zip %><br />
				Start Time: <%= theEvent.dateTime %>
			</p>
			<p>
				<img src=<%= map %> alt="map">
			</p>
			<table class="stripedHoveredTable">
				<thead>
					<th>Driver</th>
					<th>Departing</th>
					<th>Spots available</th>
					<th></th>
				</thead>
				<tbody>
					<% for(var i = 0; i < rides.length; i++) { %>
						<tr>
							<td><%= drivers[i].username %></td>
							<td><%= rides[i].departureTime %></td>
							<td><%= rides[i].spots - rides[i].riders.length %></td>
							<td><button class="joinRideButton" data=<%= rides[i]._id %>>Join Ride</button></td>
						</tr>
					<% } %>
				</tbody>
			</table> <br />
			<a class="newObjButton" href=<%= theEvent.name + '/newRide' %>>New Ride</a> <br />
			<%= JSON.stringify(team) %>
			<%= JSON.stringify(theEvent) %>
			<%= JSON.stringify(rides) %>
			<%= JSON.stringify(drivers) %>
		</div>
	</body>
</html>